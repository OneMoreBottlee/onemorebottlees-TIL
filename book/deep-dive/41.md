# 41장 타이머

### 41.1 호출 스케줄링

명시적으로 함수를 호출하면 함수가 즉시 호출된다. 명시적으로 호출하지 않고 일정 시간이 경과된 후 호출되도록하려면 타이머 함수를 사용한다. 이를 호출 스케줄링이라 한다.

JS는 타이머를 생성할 수 있는 타이머 함수 setTimeout과 setInterval, 제거할 수 있는 clearTimeout과 clearInterval을 제공한다.

JS 엔진은 단 하나의 실행 컨텍스트 스택을 갖기에 두 가지 이상의 태스크를 동시에 실행할 수 없는 싱글 스레드로 동작한다. 이러한 이유ㅜ로 타이머 함수는 비동기 처리 방식으로 동작한다.



### 41.2 타이머 함수

#### 41.2.1 setTimeout / clearTimeout

setTimeout 함수는 두 번째 인수로 전달받은 시간으로 단 한 번 동작하는 타이머를 생성한다. 타이머가 완료되면 첫 번째 인수로 전달받은 콜백 함수가 호출된다.

```javascript
const timeout = setTimeout(func|code[, delay, param1, param2, ...])

// func 타이머가 완료된 후 호출될 콜백 함수
// delay 타이머 완료 시간. 생략시 기본값 0
// param1, 2 ... 호출 스케줄링된 콜백 함수에 전달해야 할 인수
```

setTimeout 함수는 생성된 타이머를 식별할 수 있는 고유한 타이머 id를 반환한다. 반환한 타이머 id를 clearTimeout 함수의 인수로 전달하면 타이머를 취소할 수 있다.



#### 41.2.2 setInterval / clearInterval

setInterval 함수는 두 번째 인수로 전달받은 시간으로 반복 동작하는 타이머를 생성한다. 이후 타이머가 만료될 때마다 첫 번째 인수로 전달받은 콜백 함수가 반복 호출된다. 이는 타이머가 취소될때까지 지속된다.

```javascript
timeId = setInterval(func|code[, delay, param1, param2, ...])
```

setInterval 함수는 생성된 타이머를 식별할 수 있는 고유한 타이머 id를 반환한다. 반환한 타이머 id를 clearInterval 함수의 인수로 전달하면 타이머를 취소할 수 있다.



### 41.3 디바운스와 스로틀

scroll, resize, input, mousemove 같은 이벤트는 짧은 시간 간격으로 연속해서 발생한다. 이러한 이벤트에 바인딩한 이벤트 핸들러는 과도하게 호출되어 성능에 문제를 일으킬 수 있다. 디바운스와 스로틀은 짧은 시간 간격으로 연속해서 발생하는 이벤트를 그룹화해 과도한 이벤트 핸들러의 호출을 방지하는 프로그래밍 기법이다.



#### 41.3.1 디바운스

짧은 시간 간격으로 이벤트가 연속해서 발생하면 이벤트 핸들러를 호출하지 않다가 일정 시간이 경과한 이후 이벤트 핸들러가 한 번만 호출되도록 한다. 즉, 발생하는 이벤트를 그룹화해서 **마지막 한 번만 호출**되도록 하는 방법이다.

resize 이벤트 처리나 input 요소에 입력된 값으로 ajax 요청하는 입력 필드 자동완성 UI 구현, 버튼 중복 클릭 방지 처리 등에 유용하게 사용된다.



#### 41.3.2 스로틀

짧은 시간 간격으로 이벤트가 연속해서 발생하더라도 일정 시간 간격으로 이벤트 핸들러가 최대 한 번만 호출되도록 한다. 즉, 연속해서 발생하는 이벤트를 그룹화해 **일정 시간 단위**로 이벤트 핸들러가 호출되도록 호출 주기를 만드는 방법이다.

scroll 이벤트 처리나 무한 스크롤 UI 구현 등에 유용하게 사용된다.

